extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/selectTree.pug

block main
    +alert-error(5000)

    h1.mb-4 Thêm mới sản phẩm
    form(action=`${prefixAdmin}/products/create` id="form-create-product" method="POST" enctype="multipart/form-data")
        //- Tiêu đề
        .form-group
            label(for="title") Tiêu đề
            input#title.form-control(type="text" name="title" placeholder="Nhập tiêu đề sản phẩm" required)

        //- Danh mục
        .form-group
            label(for="product_category_id") Danh mục cha
            select#product_category_id.form-control(name="product_category_id")
                option(value="") -- Chọn danh mục cha --
                if (records)
                    +selectTree(records, 1, "")

        //- Mô tả
        .form-group
            label(for="description") Mô tả
            textarea#description.form-control(name="description" rows="5" placeholder="Mô tả ngắn về sản phẩm")

        //- Giá
        .form-group
            label(for="price") Giá
            input#price.form-control(type="number" name="price" value="0" min="0" step="1" required)

        //- Giảm giá
        .form-group
            label(for="discountPercentage") Giảm giá (%)
            input#discountPercentage.form-control(type="number" name="discountPercentage" value="0" min="0" max="100" step="1")

        //- Số lượng
        .form-group
            label(for="stock") Số lượng
            input#stock.form-control(type="number" name="stock" value="0" min="0" step="1" required)

        //- Ảnh (upload + preview)
        .form-group(upload-image)
            label(for="thumbnail") Ảnh
            input#thumbnail.form-control-file(type="file" name="thumbnail" accept="image/*" upload-image-input)
            img.image-preview(src="" alt="Xem trước ảnh" upload-image-preview)

        //- Vị trí
        .form-group
            label(for="position") Vị trí
            input#position.form-control(type="number" name="position" placeholder="Tự động tăng nếu để trống" min="1" step="1")

        //- Feature (Nổi bật)
        .form-group
            label.d-block Nổi bật
            .form-check.form-check-inline
                input#featureYes.form-check-input(type="radio" name="feature" value="featured" checked)
                label.form-check-label(for="featureYes") Có
            .form-check.form-check-inline
                input#featureNo.form-check-input(type="radio" name="feature" value="none")
                label.form-check-label(for="featureNo") Không

        //- Trạng thái
        .form-group
            label.d-block Trạng thái
            .form-check.form-check-inline
                input#statusActive.form-check-input(type="radio" name="status" value="active" checked)
                label.form-check-label(for="statusActive") Hoạt động
            .form-check.form-check-inline
                input#statusInactive.form-check-input(type="radio" name="status" value="inactive")
                label.form-check-label(for="statusInactive") Dừng hoạt động

        //- Submit
        .form-group
            button.btn.btn-primary(type="submit") Tạo mới

    script(src="/admin/js/product.js")
